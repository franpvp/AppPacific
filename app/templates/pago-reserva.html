{% extends './layout.html' %}

{% block title %}Home{% endblock %}

{% block body%}
<!-- Barra menu -->
<div class="container-fluid">
    <div class="barra-menu row">
        <div class="row">
            <div class="col-4"></div>
            <div class="col-4 text-center">
                <img class="logo_home mx-auto" src="{{ url_for('static', filename='img/logo2_hotel.png') }}" alt="logo">
            </div>
            <div class="col-4"></div>
            <div class="btn-grupo col-xs-12 col-sm-12 col-md-12 col-6 text-center">
                <!-- Botones -->
                <div class="col-12 d-flex justify-content-center">
                    <a href="{{ url_for('home') }}">
                        <button class="boton">Inicio</button>
                    </a>
                    <a href="{{ url_for('mis_reservas') }}">
                        <button class="boton">Mis reservas</button>
                    </a>
                    <div class="dropdown">
                        <button class="boton dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                            <img class="logo" src="{{ url_for('static', filename='img/logo_usuario.png') }}" alt="logo">
                            <small>Bienvenido {{ usuario.nombre_usuario }}</small>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton">
                            <li><a class="dropdown-item" href="#">Configuración</a></li>
                            <li><a class="dropdown-item" href="#">Cerrar Sesión</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-12"> <!-- Empuja los botones hacia la derecha en dispositivos móviles -->
                    
                </div>
                <div class="col-12"> <!-- Empuja los botones hacia la derecha en dispositivos móviles -->
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Información de la reserva -->
<div class="container-fluid pt-5">
    <h1 class="titulo_pago_reserva">Pago Reserva</h1>
    <div class="row">
        <div class="col"></div>
        <div class="contenedor-info1 col-6 pt-5">
            <div class="row">
                <h1>Tus datos</h1>
                <div class="col-6">
                    <div class="form-group">
                        <label for="campo1">Nombre</label>
                        <p type="text" class="form-control" disabled>{{ usuario.nombre_usuario }}</p>
                    </div>
                    <div class="form-group">
                        <label for="campo3">E-mail</label>
                        <p type="text" class="form-control" disabled>{{ usuario.correo_usuario }}</p>
                    </div>
                    <div class="form-group">
                        <label for="campo5">Hora de llegada</label>
                        <p type="text" class="form-control" disabled>15:00 P.M</p>
                    </div>
                </div>
                <div class="col-6">
                    <div class="form-group">
                        <label for="campo2">Apellido</label>
                        <p type="text" class="form-control" disabled>{{ usuario.apellido_usuario }}</p>
                    </div>
                    <div class="form-group">
                        <label for="campo4">Rut</label>
                        <p type="text" class="form-control" disabled>{{ usuario.rut_usuario }}</p>
                    </div>
                    <div class="form-group">
                        <label for="campo6">Teléfono</label>
                        <p type="text" class="form-control" disabled>{{ usuario.telefono_usuario }}</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="col"></div>
        <!-- Formulario Pago -->
        <div class="contenedor-info2 col-4 pt-5">
            <form action="/pago-reserva" method="post">
                <ul class="list-group list-group-flush">
                    <li id="fechaIngreso" class="list-group-item"></li>
                    <li id="fechaSalida" class="list-group-item"></li>
                    <li id="precio-inicial" class="list-group-item"></li>
                    <li class="list-group-item text-center">
                        <button class="boton btn btn-success text-center">
                            <img class="logo" src="{{ url_for('static', filename='img/tarjeta-de-credito.png') }}" alt="logo">
                            Elige la forma de pago
                        </button>
                    </li>
                    <li class="list-group-item"><div class="row">
                        <div class="col"></div>
                        <div class="col-12">
                            <div class="d-grid gap-2 pt-3">
                                <button class="btn btn-primary" type="submit">Pagar</button>
                            </div>
                        </div>
                        <div class="col"></div>
                    </div></li>
                  </ul>
            </form>
        </div>
        <div class="col"></div>
    </div>
</div>

<script>
    // Datos de la reserva
    var totalPrecioInicial = localStorage.getItem('totalPrecioInicial');
    var fechaIngreso = localStorage.getItem('fechaIngreso');
    var fechaSalida = localStorage.getItem('fechaSalida');

    // Verificar si totalPrecioInicial existe y no es nulo
    if (totalPrecioInicial !== null && fechaIngreso !== null && fechaSalida !== null) {
        // Mostrar totalPrecioInicial en el elemento HTML
        document.getElementById('precio-inicial').textContent = 'Total a pagar (30% de la reserva): ' + totalPrecioInicial;
        document.getElementById('fechaIngreso').textContent = 'Fecha de llegada: ' + fechaIngreso;
        document.getElementById('fechaSalida').textContent = 'Fecha de salida: ' + fechaSalida;
    } else {
        // Manejar el caso en el que totalPrecioInicial no está definido
        document.getElementById('precio-inicial').textContent = 'Total Precio Inicial no disponible';
        document.getElementById('fechaIngreso').textContent = 'Fecha ingreso no disponible';
        document.getElementById('fechaSalida').textContent = 'Fecha salida no disponible';
    }

    document.addEventListener('DOMContentLoaded', function () {
        // Obtener los valores del localStorage
        var nombre = localStorage.getItem('nombre');
        var email = localStorage.getItem('email');
        var apellido = localStorage.getItem('apellido');
        var rut = localStorage.getItem('rut');
        var telefono = localStorage.getItem('telefono');

        // Obtener las etiquetas <p> por su ID y establecer los valores
        document.getElementById('nombre').textContent = nombre;
        document.getElementById('email').textContent = email;
        document.getElementById('apellido').textContent = apellido;
        document.getElementById('rut').textContent = rut;
        document.getElementById('telefono').textContent = telefono;
        document.getElementById('nombre').textContent = nombre;
        document.getElementById('nombre-logo').textContent = 'Bienvenido ' + nombre;
    });

    
</script>




{% endblock %}